#!/usr/bin/expect -f

#exp_internal 1

spawn node src/main.js test/read-line.lsp

set timeout 5

send "Line 1\r"
expect {
    "^Line 1\r\n<|Line 1|>$" {}
    timeout {exit 1}
    eof {exit 2}
}

send "Line 2\rLine 3\r"
expect {
    "^Line 2\r\nLine 3\r\n<|Line 2|><|Line 3|>$" {}
    timeout {exit 1}
    eof {exit 2}
}

exit 0
